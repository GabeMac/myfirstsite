<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to My Homepage</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="weather-widget/styles/weather-widget.css">
</head>
<body>
    <div class="hero-section">
        <img id="dynamicBanner" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80" alt="Weather Banner" class="banner-image" loading="lazy">
        <div class="hero-content">
            <h1>Welcome to My Homepage!</h1>
            <button class="contact-btn" onclick="alert('Contact form coming soon!')">Contact Me</button>
        </div>
    </div>
    <main class="main-content">
        <!-- Weather Widget Section -->
        <section class="weather-section">
            <div id="weatherWidget" class="weather-widget"></div>
        </section>
        <img src="52-129812687-v1-q85w1560cx0cy0cw0ch0h0.png" alt="Additional Image" style="width:100%;max-width:600px;height:auto;display:block;margin:2rem auto 0 auto;border-radius:8px;">
    </main>
    <footer class="site-footer">
        <div class="emoji-row">
            🌟 ⭐ ✨ 🎉 🎊 🌈 🦄 🎨 🎭 🎪 🎡 🎢 🎠 🎯 🎲 🎮 🎸 🎹 🎤 🎧 🎵 🎶 🎼 🎺 🎻 🥳 🤩 😎 🤗 😄 😊 🙂 😉 😋 🥰 😍 🤖 👾 🎃 🎄 🎁 ⚡ 💫 🔥 💎 💝 💖 💗 💓 💕 🌸 🌺 🌻 🌹 🌷 🌼 🍀 🌿 🌱 🌳 🍃
        </div>
    </footer>
    
    <script src="weather-widget/scripts/weather-widget.js"></script>
    <script>
        // Dynamic Banner System
        class DynamicBanner {
            constructor() {
                this.bannerElement = document.getElementById('dynamicBanner');
                this.weatherImages = {
                    // Clear/Sunny weather
                    'clear': 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1200&q=80', // Sunny mountain landscape
                    'sunny': 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1200&q=80',
                    
                    // Cloudy weather
                    'cloudy': 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1200&q=80', // Cloudy sky
                    'overcast': 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1200&q=80',
                    'partly cloudy': 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80', // Partly cloudy
                    
                    // Rainy weather
                    'rain': 'https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?auto=format&fit=crop&w=1200&q=80', // Rainy day
                    'rainy': 'https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?auto=format&fit=crop&w=1200&q=80',
                    'drizzle': 'https://images.unsplash.com/photo-1556075798-4825dfaaf498?auto=format&fit=crop&w=1200&q=80', // Light rain
                    'showers': 'https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?auto=format&fit=crop&w=1200&q=80',
                    
                    // Snow weather
                    'snow': 'https://images.unsplash.com/photo-1491002052546-bf38f186af56?auto=format&fit=crop&w=1200&q=80', // Snowy landscape
                    'snowy': 'https://images.unsplash.com/photo-1491002052546-bf38f186af56?auto=format&fit=crop&w=1200&q=80',
                    'blizzard': 'https://images.unsplash.com/photo-1491002052546-bf38f186af56?auto=format&fit=crop&w=1200&q=80',
                    
                    // Stormy weather
                    'thunderstorm': 'https://images.unsplash.com/photo-1561553873-e8491a564fd0?auto=format&fit=crop&w=1200&q=80', // Storm clouds
                    'storm': 'https://images.unsplash.com/photo-1561553873-e8491a564fd0?auto=format&fit=crop&w=1200&q=80',
                    
                    // Foggy/Misty weather
                    'fog': 'https://images.unsplash.com/photo-1487621167305-5d248087c724?auto=format&fit=crop&w=1200&q=80', // Foggy morning
                    'mist': 'https://images.unsplash.com/photo-1487621167305-5d248087c724?auto=format&fit=crop&w=1200&q=80',
                    'haze': 'https://images.unsplash.com/photo-1487621167305-5d248087c724?auto=format&fit=crop&w=1200&q=80',
                    
                    // Default fallback
                    'default': 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80'
                };
            }
            
            updateBanner(weatherDescription) {
                if (!weatherDescription) return;
                
                const description = weatherDescription.toLowerCase();
                let imageUrl = this.weatherImages.default;
                
                // Match weather description to appropriate image
                for (const [condition, url] of Object.entries(this.weatherImages)) {
                    if (description.includes(condition)) {
                        imageUrl = url;
                        break;
                    }
                }
                
                // Smooth transition
                this.bannerElement.style.opacity = '0.7';
                setTimeout(() => {
                    this.bannerElement.src = imageUrl;
                    this.bannerElement.alt = `Weather Banner - ${weatherDescription}`;
                    this.bannerElement.style.opacity = '1';
                }, 300);
                
                console.log(`Banner updated for weather: ${weatherDescription}`);
            }
        }
        
        // Initialize dynamic banner
        const dynamicBanner = new DynamicBanner();
        
        // Enhanced Weather Widget with Banner Integration
        class EnhancedWeatherWidget extends WeatherWidget {
            render(currentWeather, forecast) {
                // Update banner based on current weather
                if (currentWeather && currentWeather.current && currentWeather.current.description) {
                    dynamicBanner.updateBanner(currentWeather.current.description);
                }
                
                // Call original render method
                super.render(currentWeather, forecast);
            }
        }
        
        // Initialize the weather widget when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            const widget = new EnhancedWeatherWidget('weatherWidget');
            
            // Try to get user's location first, fallback to London
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    // Success callback
                    function(position) {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        widget.initWithCoordinates(lat, lon);
                    },
                    // Error callback - fallback to London
                    function(error) {
                        console.log('Location access denied or failed:', error.message);
                        widget.init('London');
                    },
                    // Options
                    {
                        timeout: 10000, // 10 second timeout
                        enableHighAccuracy: false,
                        maximumAge: 300000 // Cache for 5 minutes
                    }
                );
            } else {
                // Geolocation not supported - fallback to London
                console.log('Geolocation not supported by this browser');
                widget.init('London');
            }
        });
    </script>
</body>
</html>
